<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Football LiveScore Pro</title>
<style>
body {margin:0; background:#0f172a; color:#e5e7eb; font-family:Arial,sans-serif;}
header {background:#020617; padding:15px; text-align:center; font-size:24px; font-weight:bold;}
.container {padding:15px;}
.match-card {background:#111827; border-radius:14px; padding:14px; margin-bottom:12px; cursor:pointer; transition:0.3s;}
.match-card:hover {background:#1f2937;}
.teams {display:flex; justify-content:space-between; align-items:center;}
.team {display:flex; align-items:center; gap:8px;}
.team img {width:30px;}
.score {font-size:22px; font-weight:bold;}
.live {color:#22c55e; font-size:12px; margin-top:6px;}
.player-grid {display:grid; grid-template-columns:repeat(auto-fit,minmax(100px,1fr)); gap:10px; margin-top:10px;}
.player {background:#020617; padding:8px; border-radius:10px; text-align:center;}
.player img {width:45px; border-radius:50%;}
table {width:100%; border-collapse:collapse; margin-top:15px;}
td, th {padding:8px; text-align:left; border-bottom:1px solid #222;}
input[type=text]{width:100%;padding:8px;margin:10px 0;border-radius:6px;border:none;background:#1f2937;color:#e5e7eb;}
button{padding:8px 12px;border:none;border-radius:6px;background:#22c55e;color:#0f172a;cursor:pointer;}
button:hover{background:#16a34a;}
</style>
</head>
<body>
<header>âš½ Football LiveScore Pro</header>
<div class="container">

<h2>Search Team / Fixture</h2>
<input type="text" id="search-input" placeholder="Enter team name or match...">
<button onclick="searchMatches()">Search</button>
<div id="search-results"></div>

<h2>Live Matches</h2>
<div id="live-matches"></div>

<h2>League Table (Sample: EPL)</h2>
<div id="league-table"></div>

<h2>Fixtures & Results</h2>
<div id="fixtures-results"></div>

<h2>Match Center</h2>
<div id="lineups"></div>
<div id="events"></div>

</div>
<script>
const API_KEY = 'b59e680cd85edd235fe1debcaea59e91';
const BASE_URL = 'https://v3.football.api-sports.io';

async function fetchAPI(endpoint){
    const res = await fetch(BASE_URL+endpoint, {
        headers:{'x-apisports-key':API_KEY}
    });
    return res.json();
}

// SEARCH FUNCTION
function searchMatches(){
    const query = document.getElementById('search-input').value.toLowerCase();
    if(!query) return;
    fetchAPI('/teams?search='+query).then(data=>{
        let html='<h3>Search Results:</h3>';
        if(data.response.length===0){html+='<p>No results found</p>';}
        data.response.forEach(team=>{
            html+=`<div class='match-card'><img src='${team.team.logo}' width='40'> ${team.team.name}</div>`;
        });
        document.getElementById('search-results').innerHTML=html;
    });
}

// LIVE MATCHES
fetchAPI('/fixtures?live=all').then(data=>{
    let html='';
    data.response.forEach(m=>{
        html+=`<div class="match-card" onclick="loadMatch(${m.fixture.id})">
            <div class="teams">
                <div class="team"><img src='${m.teams.home.logo}'> ${m.teams.home.name}</div>
                <div class="score">${m.goals.home} - ${m.goals.away}</div>
                <div class="team"><img src='${m.teams.away.logo}'> ${m.teams.away.name}</div>
            </div>
            <div class="live">${m.fixture.status.elapsed}' LIVE</div>
        </div>`;
    });
    document.getElementById('live-matches').innerHTML=html;

    // Automatically load the first live match in Match Center
    if(data.response.length>0) loadMatch(data.response[0].fixture.id);
});

// LEAGUE TABLE
fetchAPI('/standings?league=39&season=2024').then(data=>{
    const table = data.response[0].league.standings[0];
    let html='<table><tr><th>Pos</th><th>Team</th><th>Points</th></tr>';
    table.forEach(t=>{
        html+=`<tr><td>${t.rank}</td><td><img src='${t.team.logo}' width='20'> ${t.team.name}</td><td>${t.points}</td></tr>`;
    });
    html+='</table>';
    document.getElementById('league-table').innerHTML=html;
});

// FIXTURES & RESULTS (last 10 and next 10)
Promise.all([
    fetchAPI('/fixtures?last=10'),
    fetchAPI('/fixtures?next=10')
]).then(([results,fixtures])=>{
    let html='<h3>Recent Results</h3>';
    results.response.forEach(m=>{
        html+=`<div class='match-card'>
            <div class='teams'>
                <div class='team'><img src='${m.teams.home.logo}'> ${m.teams.home.name}</div>
                <div class='score'>${m.goals.home} - ${m.goals.away}</div>
                <div class='team'><img src='${m.teams.away.logo}'> ${m.teams.away.name}</div>
            </div>
            <small>${new Date(m.fixture.date).toLocaleString()}</small>
        </div>`;
    });
    html+='<h3>Upcoming Fixtures</h3>';
    fixtures.response.forEach(m=>{
        html+=`<div class='match-card'>
            <div class='teams'>
                <div class='team'><img src='${m.teams.home.logo}'> ${m.teams.home.name}</div>
                <div class='score'>-</div>
                <div class='team'><img src='${m.teams.away.logo}'> ${m.teams.away.name}</div>
            </div>
            <small>${new Date(m.fixture.date).toLocaleString()}</small>
        </div>`;
    });
    document.getElementById('fixtures-results').innerHTML=html;
});

// LOAD MATCH CENTER
function loadMatch(fixtureId){
    // Lineups
    fetchAPI(`/fixtures/lineups?fixture=${fixtureId}`).then(data=>{
        let html='';
        data.response.forEach(team=>{
            html+=`<h4><img src='${team.team.logo}' width='25'> ${team.team.name}</h4><div class='player-grid'>`;
            team.startXI.forEach(p=>{
                html+=`<div class='player'><img src='${p.player.photo}'><div>${p.player.name}</div><small>${p.player.pos}</small></div>`;
            });
            html+='</div>';
        });
        document.getElementById('lineups').innerHTML=html;
    });

    // Events
    fetchAPI(`/fixtures/events?fixture=${fixtureId}`).then(data=>{
        let html='';
        data.response.forEach(e=>{
            html+=`<div>${e.time.elapsed}' - ${e.player.name} (${e.type})</div>`;
        });
        document.getElementById('events').innerHTML=html;
    });
}
</script>
</body>
</html>
