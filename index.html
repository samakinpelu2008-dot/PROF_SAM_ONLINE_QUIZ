<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Football LiveScore Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Segoe UI,Arial;
  background:#0b1220;
  color:#e5e7eb;
}
header{
  background:#020617;
  padding:15px;
  text-align:center;
  font-size:22px;
  font-weight:700;
  position:sticky;
  top:0;
  z-index:100;
}
.container{
  display:grid;
  grid-template-columns:320px 1fr 420px;
  height:calc(100vh - 60px);
}
.panel{
  padding:10px;
  overflow-y:auto;
}
.left{background:#020617}
.center{background:#0f172a}
.right{background:#020617}

input{
  width:100%;
  padding:8px;
  border:none;
  border-radius:6px;
  margin-bottom:10px;
}

.match{
  background:#111827;
  padding:8px;
  margin-bottom:6px;
  border-radius:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  cursor:pointer;
}
.match:hover{background:#1f2937}

.team{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:14px;
}
.team img{width:22px}

.score{font-weight:700}

.tabs{
  display:flex;
  gap:6px;
  margin:10px 0;
}
.tab{
  padding:6px 10px;
  background:#1f2937;
  border-radius:6px;
  cursor:pointer;
}
.tab.active{
  background:#22c55e;
  color:#020617;
}

.player-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(90px,1fr));
  gap:8px;
}
.player{
  background:#111827;
  padding:5px;
  border-radius:6px;
  text-align:center;
  font-size:12px;
}
.player img{
  width:40px;
  border-radius:50%;
}

table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}
th,td{
  padding:6px;
  border-bottom:1px solid #1f2937;
}

.badge{
  font-size:11px;
  padding:2px 6px;
  border-radius:4px;
  background:#22c55e;
  color:#020617;
}
</style>
</head>

<body>

<header>âš½ Football LiveScore Pro</header>

<div class="container">

<!-- LEFT -->
<div class="panel left">
  <input placeholder="Search team..." onkeyup="searchTeam(this.value)">
  <h3>Live Matches</h3>
  <div id="live"></div>
</div>

<!-- CENTER -->
<div class="panel center">
  <h3>Fixtures & Results</h3>
  <div id="fixtures"></div>
</div>

<!-- RIGHT -->
<div class="panel right">
  <h3 id="matchTitle">Select a match</h3>

  <div class="tabs">
    <div class="tab active" onclick="switchTab('lineups')">Lineups</div>
    <div class="tab" onclick="switchTab('events')">Events</div>
    <div class="tab" onclick="switchTab('stats')">Stats</div>
    <div class="tab" onclick="switchTab('h2h')">H2H</div>
    <div class="tab" onclick="switchTab('table')">Table</div>
  </div>

  <div id="content"></div>
</div>

</div>

<script>
const API_KEY="b59e680cd85edd235fe1debcaea59e91";
const BASE="https://v3.football.api-sports.io";

let currentFixture=null;
let currentTeams=null;
let currentLeague=null;
let activeTab="lineups";

async function api(url){
  const res=await fetch(BASE+url,{
    headers:{'x-apisports-key':API_KEY}
  });
  return res.json();
}

function matchHTML(f){
  return `
  <div class="match"
    onclick="loadMatch(${f.fixture.id},
    ${f.teams.home.id},
    ${f.teams.away.id},
    ${f.league.id},
    '${f.teams.home.name} vs ${f.teams.away.name}')">

    <div class="team">
      <img src="${f.teams.home.logo}">
      ${f.teams.home.name}
    </div>

    <div class="score">
      ${f.goals.home ?? '-'} - ${f.goals.away ?? '-'}
    </div>

    <div class="team">
      <img src="${f.teams.away.logo}">
      ${f.teams.away.name}
    </div>
  </div>`;
}

async function loadLive(){
  const d=await api("/fixtures?live=all");
  document.getElementById("live").innerHTML =
    d.response.map(matchHTML).join("");
}

async function loadFixtures(){
  const d=await api("/fixtures?next=25");
  document.getElementById("fixtures").innerHTML =
    d.response.map(matchHTML).join("");
}

function loadMatch(fid,hid,aid,lid,title){
  currentFixture=fid;
  currentTeams=`${hid}-${aid}`;
  currentLeague=lid;
  document.getElementById("matchTitle").innerText=title;
  loadTab();
}

function switchTab(tab){
  activeTab=tab;
  document.querySelectorAll(".tab")
    .forEach(t=>t.classList.remove("active"));
  event.target.classList.add("active");
  loadTab();
}

async function loadTab(){
  if(!currentFixture)return;
  const c=document.getElementById("content");
  c.innerHTML="Loading...";

  if(activeTab==="lineups"){
    const d=await api(`/fixtures/lineups?fixture=${currentFixture}`);
    c.innerHTML=d.response.map(t=>`
      <h4>${t.team.name}</h4>
      <div class="player-grid">
      ${t.startXI.map(p=>`
        <div class="player">
          <img src="${p.player.photo}">
          <div>${p.player.name}</div>
        </div>`).join("")}
      </div>
    `).join("");
  }

  if(activeTab==="events"){
    const d=await api(`/fixtures/events?fixture=${currentFixture}`);
    c.innerHTML=d.response.map(e=>
      `${e.time.elapsed}' - ${e.player.name} (${e.type})`
    ).join("<br>");
  }

  if(activeTab==="stats"){
    const d=await api(`/fixtures/statistics?fixture=${currentFixture}`);
    c.innerHTML=d.response.map(t=>`
      <h4>${t.team.name}</h4>
      ${t.statistics.map(s=>`${s.type}: ${s.value}`).join("<br>")}
    `).join("<hr>");
  }

  if(activeTab==="h2h"){
    const d=await api(`/fixtures/headtohead?h2h=${currentTeams}`);
    c.innerHTML="<table><tr><th>Date</th><th>Match</th><th>Score</th></tr>"+
      d.response.map(m=>`
        <tr>
          <td>${new Date(m.fixture.date).toLocaleDateString()}</td>
          <td>${m.teams.home.name} vs ${m.teams.away.name}</td>
          <td>${m.goals.home}-${m.goals.away}</td>
        </tr>`).join("")+"</table>";
  }

  if(activeTab==="table"){
    const d=await api(`/standings?league=${currentLeague}&season=2024`);
    const s=d.response[0].league.standings[0];
    c.innerHTML="<table><tr><th>#</th><th>Team</th><th>Pts</th></tr>"+
      s.map(t=>`
        <tr>
          <td>${t.rank}</td>
          <td><img src="${t.team.logo}" width="18"> ${t.team.name}</td>
          <td>${t.points}</td>
        </tr>`).join("")+"</table>";
  }
}

async function searchTeam(q){
  if(q.length<3)return;
  const d=await api(`/teams?search=${q}`);
  document.getElementById("live").innerHTML=
    d.response.map(t=>`
      <div class="match" onclick="loadTeam(${t.team.id})">
        <div class="team">
          <img src="${t.team.logo}">
          ${t.team.name}
        </div>
        <span class="badge">Team</span>
      </div>`).join("");
}

async function loadTeam(id){
  const d=await api(`/fixtures?team=${id}&season=2024`);
  document.getElementById("live").innerHTML=
    d.response.map(matchHTML).join("");
}

loadLive();
loadFixtures();
setInterval(loadLive,60000);
</script>

</body>
</html>
